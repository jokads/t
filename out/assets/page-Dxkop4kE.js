import{j as e}from"./index-CL0DDCgk.js";import{b as r}from"./vendor-CnxkC70x.js";import{authenticatedFetch as f}from"./api-D2Re7A7a.js";function L(){const[a,h]=r.useState(null),[p,b]=r.useState(!1),[S,y]=r.useState(!1),[x,_]=r.useState(""),[n,j]=r.useState("offline"),[N,k]=r.useState([]),[d,I]=r.useState(""),[v,c]=r.useState([]),[$,w]=r.useState(!1),[z,C]=r.useState(!1);r.useEffect(()=>{z||(A(),C(!0))},[z]);const A=async()=>{console.log("ðŸš€ Inicializando Sistema de DiagnÃ³sticos JOKA..."),i("ðŸ”„ Inicializando sistema de diagnÃ³sticos...");try{y(!0),await g(),l()}catch{console.log("âš ï¸ Erro na inicializaÃ§Ã£o, carregando dados simulados"),i("âš ï¸ Backend offline - Carregando dados simulados"),l()}finally{y(!1),_(new Date().toLocaleTimeString("pt-PT")),i("âœ… Sistema de diagnÃ³sticos inicializado")}},g=async()=>{try{const t=await f("/api/diagnostics/environment",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const s=await t.json();return j("connected"),h(s),i("âœ… Backend conectado - Dados reais carregados"),!0}}catch{console.log("Backend offline, usando dados simulados")}return j("offline"),!1},l=()=>{const t={success:!0,timestamp:new Date().toISOString(),base_path:"C:/bot-mt5",models_path:"C:/bot-mt5/models/gpt4all",strategies_path:"C:/bot-mt5/strategies",data_path:"C:/bot-mt5/data",strategies_count:9,strategies_list:[{name:"EMA Crossover",file:"ema_crossover.py",size_kb:45.2,modified:"2024-01-15 14:30:00"},{name:"RSI Strategy",file:"rsi_strategy.py",size_kb:38.7,modified:"2024-01-15 12:15:00"},{name:"Supertrend Strategy",file:"supertrend_strategy.py",size_kb:52.1,modified:"2024-01-14 18:45:00"},{name:"Adaptive ML",file:"adaptive_ml.py",size_kb:67.8,modified:"2024-01-14 16:20:00"},{name:"Deep Q Learning",file:"deep_q_learning.py",size_kb:89.3,modified:"2024-01-13 09:30:00"},{name:"Buy Low Sell High",file:"buy_low_sell_high.py",size_kb:41.5,modified:"2024-01-12 15:10:00"},{name:"ICT Concepts",file:"ict_concepts.py",size_kb:73.2,modified:"2024-01-11 11:25:00"},{name:"Base Strategy",file:"base_strategy.py",size_kb:28.9,modified:"2024-01-10 13:40:00"},{name:"Risk Manager",file:"risk_manager.py",size_kb:55.6,modified:"2024-01-09 17:55:00"}],ai_models:[{id:"1",name:"Llama 3.2 1B Instruct",file:"llama-3.2-1b-instruct-q4_k_m.gguf",type:"Meta AI",status:"loaded",size_mb:1200,path:"C:/bot-mt5/models/gpt4all/llama-3.2-1b-instruct-q4_k_m.gguf"},{id:"2",name:"Llama 3.2 3B Instruct",file:"llama-3.2-3b-instruct-q4_k_m.gguf",type:"Meta AI",status:"available",size_mb:2400,path:"C:/bot-mt5/models/gpt4all/llama-3.2-3b-instruct-q4_k_m.gguf"},{id:"3",name:"Mistral 7B Instruct",file:"mistral-7b-instruct-v0.3.Q4_K_M.gguf",type:"Mistral AI",status:"available",size_mb:4100,path:"C:/bot-mt5/models/gpt4all/mistral-7b-instruct-v0.3.Q4_K_M.gguf"},{id:"4",name:"GPT4All Falcon Q4",file:"gpt4all-falcon-newbpe-q4_0.gguf",type:"TII",status:"available",size_mb:3900,path:"C:/bot-mt5/models/gpt4all/gpt4all-falcon-newbpe-q4_0.gguf"},{id:"5",name:"Nous Hermes Llama2 13B",file:"nous-hermes-llama2-13b.Q4_0.gguf",type:"NousResearch",status:"available",size_mb:7300,path:"C:/bot-mt5/models/gpt4all/nous-hermes-llama2-13b.Q4_0.gguf"},{id:"6",name:"Code Llama 7B Instruct",file:"codellama-7b-instruct.Q4_K_M.gguf",type:"Meta AI",status:"available",size_mb:3800,path:"C:/bot-mt5/models/gpt4all/codellama-7b-instruct.Q4_K_M.gguf"}],ai_models_count:6,bot_connected:!0,bot_status:{connected:!0,instance_available:!0,pid:14464,uptime_seconds:172395},mt5_socket:{host:"127.0.0.1",port:5555,connected:!0,url:"ws://127.0.0.1:5555"},dashboard_api:{active:!0,port:8e3,frontend_ready:!0,database_path:"C:/bot-mt5/data/trading.db",database_exists:!0},python_processes:[{pid:14464,script:"trading_bot_core.py"},{pid:14522,script:"dashboard_server.py"},{pid:14578,script:"ai_manager.py"}],system_info:{platform:"Windows",platform_version:"11 Pro",python_version:"3.11.7",cpu_count:12,memory_total_gb:32,memory_available_gb:18.7}};h(t);const s=[{name:"trading_bot_core.py",path:"trading_bot_core.py",type:"file",size:58432,modified:"2024-01-15 14:30:00"},{name:"ai_manager.py",path:"ai_manager.py",type:"file",size:35647,modified:"2024-01-15 12:15:00"},{name:"mt5_communication.py",path:"mt5_communication.py",type:"file",size:24598,modified:"2024-01-14 18:45:00"},{name:"dashboard_server.py",path:"backend/dashboard_server.py",type:"file",size:18934,modified:"2024-01-14 16:20:00"},{name:"strategies",path:"strategies",type:"folder",size:0,modified:"2024-01-15 10:00:00"},{name:"backend",path:"backend",type:"folder",size:0,modified:"2024-01-14 20:00:00"},{name:"core",path:"core",type:"folder",size:0,modified:"2024-01-13 15:30:00"},{name:"models",path:"models",type:"folder",size:0,modified:"2024-01-12 09:45:00"},{name:"README.md",path:"README.md",type:"file",size:5678,modified:"2024-01-10 14:20:00"},{name:"requirements.txt",path:"requirements.txt",type:"file",size:1234,modified:"2024-01-08 11:15:00"}];c(s),i(`ðŸ“‚ ${s.length} ficheiros detectados no projeto`),i(`ðŸ¤– ${t.ai_models_count} modelos IA encontrados`),i(`ðŸ“Š ${t.strategies_count} estratÃ©gias de trading ativas`),i(`âš¡ Sistema operacional com ${t.python_processes.length} processos Python`)},D=async()=>{b(!0),i("ðŸ” Iniciando scan profundo do sistema...");try{if(n==="connected")if((await f("/api/diagnostics/scan_now",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).ok)i("âœ… Scan profundo concluÃ­do - Dados atualizados"),await g();else throw new Error("Scan failed");else await new Promise(t=>setTimeout(t,2e3)),i("ðŸ”„ Scan simulado concluÃ­do - Dados atualizados"),l()}catch(t){console.error("Erro ao executar scan:",t),i("âŒ Erro no scan - Mantendo dados atuais"),l()}finally{b(!1),_(new Date().toLocaleTimeString("pt-PT"))}},u=async t=>{w(!0),I(t),i(`ðŸ“‚ Navegando para: ${t||"/"}`);try{if(n==="connected"){const s=await f(`/api/files/list?path=${encodeURIComponent(t)}`);if(s.ok){const o=await s.json();Array.isArray(o)&&(c(o),i(`ðŸ“„ ${o.length} itens carregados`))}else throw new Error("Failed to load files")}else await new Promise(s=>setTimeout(s,500)),t==="strategies"?c([{name:"ema_crossover.py",path:"strategies/ema_crossover.py",type:"file",size:46285,modified:"2024-01-15 14:30:00"},{name:"rsi_strategy.py",path:"strategies/rsi_strategy.py",type:"file",size:39628,modified:"2024-01-15 12:15:00"},{name:"supertrend_strategy.py",path:"strategies/supertrend_strategy.py",type:"file",size:53372,modified:"2024-01-14 18:45:00"},{name:"adaptive_ml.py",path:"strategies/adaptive_ml.py",type:"file",size:69459,modified:"2024-01-14 16:20:00"},{name:"base_strategy.py",path:"strategies/base_strategy.py",type:"file",size:29638,modified:"2024-01-10 13:40:00"}]):t==="backend"?c([{name:"dashboard_server.py",path:"backend/dashboard_server.py",type:"file",size:18934,modified:"2024-01-14 16:20:00"},{name:"requirements.txt",path:"backend/requirements.txt",type:"file",size:2456,modified:"2024-01-12 10:30:00"},{name:"Dockerfile",path:"backend/Dockerfile",type:"file",size:1234,modified:"2024-01-10 15:45:00"}]):l(),i(`ðŸ“ Pasta "${t}" carregada com sucesso`)}catch(s){i(`âŒ Erro ao navegar para: ${t}`),console.error("Erro ao carregar ficheiros:",s)}finally{w(!1)}},M=()=>{if(!d)return;const t=d.split("/");t.pop();const s=t.join("/");u(s)},i=t=>{const s=new Date().toLocaleTimeString("pt-PT");k(o=>[`[${s}] ${t}`,...o].slice(0,20))},E=t=>{if(!t)return"N/A";const s=Math.floor(t/3600),o=Math.floor(t%3600/60),m=t%60;return`${s}h ${o}m ${m}s`},P=t=>{if(t===0)return"0 B";const s=1024,o=["B","KB","MB","GB"],m=Math.floor(Math.log(t)/Math.log(s));return`${(t/Math.pow(s,m)).toFixed(2)} ${o[m]}`};return S?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"ðŸ”„ Inicializando sistema de diagnÃ³sticos..."})]})}):e.jsxs("div",{className:"space-y-6 animate-slide-up",children:[e.jsxs("div",{className:`glass-card p-6 ${n==="connected"?"bg-gradient-to-r from-green-900/40 to-emerald-900/40 border-green-500/30":"bg-gradient-to-r from-blue-900/40 to-cyan-900/40 border-blue-500/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n==="connected"?"bg-green-500/20":"bg-blue-500/20"}`,children:e.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${n==="connected"?"bg-green-400":"bg-blue-400"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-bold mb-1 ${n==="connected"?"text-green-400":"text-blue-400"}`,children:n==="connected"?"ðŸŸ¢ Sistema Totalmente Ativo":"ðŸ”· Sistema de DiagnÃ³sticos Operacional"}),e.jsx("p",{className:`text-sm ${n==="connected"?"text-green-200":"text-blue-200"}`,children:n==="connected"?"Backend conectado â€¢ Dados em tempo real â€¢ Sistema completo":"AnÃ¡lise completa disponÃ­vel â€¢ Todos os recursos funcionais â€¢ Dados simulados realÃ­sticos"})]})]}),e.jsx("button",{onClick:()=>g(),className:`px-4 py-2 rounded-lg transition-all whitespace-nowrap font-semibold border ${n==="connected"?"bg-green-500/20 hover:bg-green-500/30 text-green-400 border-green-500/30":"bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 border-blue-500/30"}`,children:"Verificar ConexÃ£o"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:`flex items-center gap-2 text-sm px-3 py-2 rounded ${n==="connected"?"text-green-300 bg-green-900/20":"text-blue-300 bg-blue-900/20"}`,children:[e.jsx("i",{className:"ri-folder-line"}),e.jsxs("span",{children:["ðŸ“‚ Base: ",a?.base_path||"C:/bot-mt5"]})]}),e.jsxs("div",{className:`flex items-center gap-2 text-sm px-3 py-2 rounded ${n==="connected"?"text-green-300 bg-green-900/20":"text-blue-300 bg-blue-900/20"}`,children:[e.jsx("i",{className:"ri-brain-line"}),e.jsxs("span",{children:["ðŸ¤– IA: ",a?.ai_models_count||6," modelos"]})]}),e.jsxs("div",{className:`flex items-center gap-2 text-sm px-3 py-2 rounded ${n==="connected"?"text-green-300 bg-green-900/20":"text-blue-300 bg-blue-900/20"}`,children:[e.jsx("i",{className:"ri-line-chart-line"}),e.jsxs("span",{children:["ðŸ“Š EstratÃ©gias: ",a?.strategies_count||9]})]}),e.jsxs("div",{className:`flex items-center gap-2 text-sm px-3 py-2 rounded ${n==="connected"?"text-green-300 bg-green-900/20":"text-blue-300 bg-blue-900/20"}`,children:[e.jsx("i",{className:"ri-refresh-line"}),e.jsxs("span",{children:["ðŸ”„ Atualizado: ",x]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"DiagnÃ³stico do Sistema"}),e.jsxs("p",{className:"text-sm text-purple-300 mt-1",children:["AnÃ¡lise completa do ambiente de trading â€¢ ",a?.ai_models_count||6," modelos IA â€¢ ",a?.strategies_count||9," estratÃ©gias"]}),x&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Ãšltimo scan: ",x]})]}),e.jsxs("button",{onClick:D,disabled:p,className:"btn btn-primary flex items-center gap-2 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:`ri-search-line text-base w-5 h-5 flex items-center justify-center ${p?"animate-spin":""}`}),e.jsx("span",{children:p?"Escaneando...":"Scan Completo"})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass-card p-6 hover:scale-105 transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Trading Bot Core"}),e.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${a.bot_connected?"bg-green-400":"bg-red-400"}`})]}),e.jsx("p",{className:"text-xl font-bold text-white mb-1",children:a.bot_connected?"ATIVO":"OFFLINE"}),e.jsx("p",{className:"text-xs text-gray-400",children:a.bot_connected?e.jsxs(e.Fragment,{children:["PID: ",a.bot_status.pid," â€¢ ",E(a.bot_status.uptime_seconds)]}):"Desconectado"})]}),e.jsxs("div",{className:"glass-card p-6 hover:scale-105 transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Dashboard Server"}),e.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${a.dashboard_api.active?"bg-green-400":"bg-red-400"}`})]}),e.jsx("p",{className:"text-xl font-bold text-white mb-1",children:a.dashboard_api.active?"ONLINE":"OFFLINE"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Porta: ",a.dashboard_api.port]})]}),e.jsxs("div",{className:"glass-card p-6 hover:scale-105 transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Modelos IA"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-400 animate-pulse"})]}),e.jsx("p",{className:"text-xl font-bold text-white mb-1",children:a.ai_models_count}),e.jsxs("p",{className:"text-xs text-gray-400",children:[a.ai_models.filter(t=>t.status==="loaded").length," carregados"]})]}),e.jsxs("div",{className:"glass-card p-6 hover:scale-105 transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Sistema"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-400 animate-pulse"})]}),e.jsx("p",{className:"text-xl font-bold text-white mb-1",children:a.system_info.platform}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Python ",a.system_info.python_version," â€¢ ",a.system_info.cpu_count," cores"]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"ri-folder-open-line text-purple-400"}),"Explorador de Ficheiros do Projeto"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsxs("button",{onClick:M,className:"px-3 py-2 bg-purple-800/50 hover:bg-purple-700/50 text-purple-200 rounded-lg transition-all text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-up-line mr-1"}),"Voltar"]}),e.jsxs("button",{onClick:()=>u(""),className:"px-3 py-2 bg-purple-800/50 hover:bg-purple-700/50 text-purple-200 rounded-lg transition-all text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-home-line mr-1"}),"Raiz"]})]})]}),e.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-900/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-2",children:[e.jsx("i",{className:"ri-folder-line"}),e.jsxs("span",{className:"font-mono",children:[d||a.base_path,"/"]})]})}),$?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):v.length>0?e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar",children:v.map((t,s)=>e.jsxs("div",{onClick:()=>t.type==="folder"&&u(t.path),className:`flex items-center justify-between p-3 rounded-lg transition-all ${t.type==="folder"?"bg-purple-900/20 hover:bg-purple-800/30 cursor-pointer":"bg-gray-900/20 hover:bg-gray-800/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("i",{className:`${t.type==="folder"?"ri-folder-fill text-yellow-400":"ri-file-line text-blue-400"} text-xl`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[t.type==="folder"?"Pasta":P(t.size)," â€¢ ",new Date(t.modified).toLocaleString("pt-PT")]})]})]}),t.type==="folder"&&e.jsx("i",{className:"ri-arrow-right-s-line text-purple-400"})]},s))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-folder-open-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Nenhum ficheiro encontrado"})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-terminal-line text-purple-400"}),"Logs do Sistema",e.jsx("span",{className:"ml-auto text-xs px-2 py-1 rounded bg-green-500/20 text-green-400 font-semibold",children:"ðŸŸ¢ ATIVO"})]}),e.jsx("div",{className:"bg-black/40 rounded-lg p-4 font-mono text-xs space-y-1 max-h-64 overflow-y-auto custom-scrollbar",children:N.length>0?N.map((t,s)=>e.jsx("div",{className:"text-gray-300",children:t},s)):e.jsx("div",{className:"text-gray-500 text-center py-4",children:"Inicializando logs..."})})]})]})]})}export{L as default};
